"use strict";

var _baseComponent = _interopRequireDefault(require("../baseComponent"));

var _modelAndControler = _interopRequireDefault(require("../modelAndControler"));

var _prijavaOkvir = _interopRequireDefault(require("./prijavaOkvir"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

let controler = new _modelAndControler.default();

class Prijava extends _baseComponent.default {
  constructor() {
    super("div"); //;

    this.provjera();
    controler.addEventListener("currentUser", () => {
      alert("HELLO");
    });
  }

  nitkoNijePrijavljen(event) {}

  currentUser() {
    /* 
    let user = JSON.parse(localStorage["user"]);
    let naslov=document.createElement("h5")
    naslov.innerHTML=user.username
    this.addChildren([naslov]) */
  }

  provjera() {
    let user = JSON.parse(localStorage["user"]);

    if (user == false) {
      this.nitkoNijePrijavljen();
    } else {
      let user = JSON.parse(localStorage["user"]);
      let logOut = document.createElement("button");
      logOut.innerHTML = "Odjavite se";
      let pogledajProfil = document.createElement("a");
      pogledajProfil.className = "waves-effect waves-light btn-small";
      pogledajProfil.innerHTML = "Pogledajte profil";
      pogledajProfil.addEventListener("cilck", () => {
        alert("HELLO");
        localStorage["user"] = JSON.stringify({
          username: "mate"
        });
      });
      let ime = document.createElement("h5");
      ime.innerHTML = user.username;
      logOut.addEventListener("click", () => {
        localStorage["user"] = JSON.stringify("");
        document.getElementById("example1").innerHTML = "";
      });
      this.addChildren([ime, pogledajProfil]);
    }
  }

}

module.exports = Prijava;